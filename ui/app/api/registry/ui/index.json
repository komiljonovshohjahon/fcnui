[
  {
    "name": "button",
    "version": "0.0.1",
    "content": "//v0.0.1\n\nimport 'package:flutter/material.dart';\nimport 'package:fcnui_base/fcnui_base.dart';\n\n/// [ButtonVariant] is the base class for all button variants\n///\n/// Can use these variants:\n/// - [PrimaryButtonVariant]\n/// - [SecondaryButtonVariant]\n/// - [TertiaryButtonVariant]\n/// - [ErrorButtonVariant]\n/// - [OutlineButtonVariant]\n/// - [GhostButtonVariant]\nabstract class ButtonVariant extends Equatable {\n  /// If [onPressed] is null, the button will be disabled\n  final VoidCallback? onPressed;\n\n  final String? text;\n\n  /// If [child] is provided, [text] will be ignored\n  ///\n  /// [child] will be used as the button's child\n  final Widget? child;\n\n  /// If true, it will show a loading indicator\n  ///\n  /// If [icon] is provided, icon will be replaced with loading indicator\n  ///\n  /// [onPressed] will be disabled if [isLoading] is true\n  final bool isLoading;\n\n  /// Icon of the button\n  ///\n  /// If [isLoading] is true, icon will be replaced with loading indicator\n  final IconData? icon;\n\n  /// Size of the icon\n  ///\n  /// Default is 18px\n  final double iconSize;\n\n  /// Minimum size of the button\n  ///\n  /// Default is 88px x 40px\n  final Size? minimumSize;\n\n  ///Custom background color\n  ///\n  /// It will override the default background color if provided\n  final Color? backgroundColor;\n\n  ///Custom foreground color\n  ///\n  /// It will override the default foreground color if provided\n  final Color? foregroundColor;\n\n  const ButtonVariant(\n      {this.onPressed,\n      this.text,\n      this.backgroundColor,\n      this.foregroundColor,\n      this.iconSize = 18,\n      this.child,\n      this.isLoading = false,\n      this.minimumSize,\n      this.icon})\n      : assert(iconSize >= 0, \"iconSize must be greater than or equal to 0\"),\n        assert(text != null || child != null || icon != null,\n            \"text, child, or icon must be provided\");\n\n  @override\n  List<Object?> get props =>\n      [onPressed, text, child, isLoading, icon, iconSize];\n}\n\nclass PrimaryButtonVariant extends ButtonVariant {\n  const PrimaryButtonVariant(\n      {super.onPressed,\n      super.text,\n      super.child,\n      super.isLoading,\n      super.icon,\n      super.iconSize,\n      super.minimumSize,\n      super.backgroundColor,\n      super.foregroundColor});\n}\n\nclass SecondaryButtonVariant extends ButtonVariant {\n  const SecondaryButtonVariant(\n      {super.onPressed,\n      super.text,\n      super.child,\n      super.isLoading,\n      super.icon,\n      super.iconSize,\n      super.minimumSize,\n      super.backgroundColor,\n      super.foregroundColor});\n}\n\nclass TertiaryButtonVariant extends ButtonVariant {\n  const TertiaryButtonVariant(\n      {super.onPressed,\n      super.text,\n      super.child,\n      super.isLoading,\n      super.icon,\n      super.iconSize,\n      super.minimumSize,\n      super.backgroundColor,\n      super.foregroundColor});\n}\n\nclass ErrorButtonVariant extends ButtonVariant {\n  const ErrorButtonVariant(\n      {super.onPressed,\n      super.text,\n      super.child,\n      super.isLoading,\n      super.icon,\n      super.iconSize,\n      super.minimumSize,\n      super.backgroundColor,\n      super.foregroundColor});\n}\n\nclass OutlineButtonVariant extends ButtonVariant {\n  const OutlineButtonVariant(\n      {super.onPressed,\n      super.text,\n      super.child,\n      super.isLoading,\n      super.icon,\n      super.iconSize,\n      super.minimumSize,\n      super.backgroundColor,\n      super.foregroundColor});\n}\n\nclass GhostButtonVariant extends ButtonVariant {\n  const GhostButtonVariant(\n      {super.onPressed,\n      super.text,\n      super.child,\n      super.isLoading,\n      super.icon,\n      super.iconSize,\n      super.minimumSize,\n      super.backgroundColor,\n      super.foregroundColor});\n}\n\nclass DefaultButton extends StatelessWidget {\n  final ButtonVariant variant;\n\n  const DefaultButton({super.key, required this.variant});\n\n  @override\n  Widget build(BuildContext context) {\n    return ThemeProvider(\n      builder: (context, vm) {\n        return getChild(vm);\n      },\n    );\n  }\n\n  Widget getChild(ThemeVm vm) {\n    return Theme(\n        data: vm.theme.copyWith(\n          elevatedButtonTheme: ElevatedButtonThemeData(\n            style: _getButtonStyle(vm.theme),\n          ),\n          textButtonTheme: TextButtonThemeData(\n            style: _getButtonStyle(vm.theme),\n          ),\n        ),\n        child: _getButtonWidgetType(vm.theme));\n  }\n\n  ButtonStyle _getButtonStyle(ThemeData theme) {\n    return ElevatedButton.styleFrom(\n      disabledBackgroundColor: _getBackgroundColor(theme)?.withOpacity(0.5),\n      disabledForegroundColor: _getForegroundColor(theme)?.withOpacity(0.5),\n      backgroundColor: _getBackgroundColor(theme),\n      foregroundColor: _getForegroundColor(theme),\n      shape: _getShape(theme),\n      side: _getBorder(theme),\n      padding: _getPadding(theme),\n      minimumSize: variant.minimumSize?.w,\n      splashFactory: NoSplash.splashFactory,\n      disabledMouseCursor: SystemMouseCursors.forbidden,\n      surfaceTintColor: theme.colorScheme.surface,\n      textStyle: _getTextStyle(theme),\n    );\n  }\n\n  TextStyle _getTextStyle(ThemeData theme) {\n    return theme.textTheme.bodyMedium!.sp;\n  }\n\n  EdgeInsetsGeometry _getPadding(ThemeData theme) {\n    switch (variant.runtimeType) {\n      default:\n        return const EdgeInsets.symmetric(horizontal: 16, vertical: 8).w;\n    }\n  }\n\n  Widget _getButtonWidgetType(ThemeData theme) {\n    switch (variant.runtimeType) {\n      case const (PrimaryButtonVariant):\n      case const (SecondaryButtonVariant):\n      case const (TertiaryButtonVariant):\n      case const (ErrorButtonVariant):\n        if (variant.icon == null) {\n          return ElevatedButton(\n            onPressed: _getOnPressed,\n            child: _getButtonChild(theme),\n          );\n        } else {\n          if (variant.text != null && variant.text!.isNotEmpty) {\n            return ElevatedButton.icon(\n              onPressed: _getOnPressed,\n              label: _getButtonChild(theme),\n              icon: variant.isLoading\n                  ? const _LoadingIndicator()\n                  : Icon(variant.icon, size: variant.iconSize.w),\n            );\n          }\n          return ElevatedButton(\n            onPressed: _getOnPressed,\n            child: variant.isLoading\n                ? const _LoadingIndicator()\n                : Icon(variant.icon, size: variant.iconSize.w),\n          );\n        }\n      case const (OutlineButtonVariant):\n      case const (GhostButtonVariant):\n        if (variant.icon == null) {\n          return TextButton(\n            onPressed: _getOnPressed,\n            child: _getButtonChild(theme),\n          );\n        } else {\n          return TextButton.icon(\n            onPressed: _getOnPressed,\n            label: _getButtonChild(theme),\n            icon: variant.isLoading\n                ? const _LoadingIndicator()\n                : Icon(variant.icon, size: variant.iconSize.w),\n          );\n        }\n      default:\n        return const SizedBox();\n    }\n  }\n\n  VoidCallback? get _getOnPressed {\n    switch (variant.runtimeType) {\n      default:\n        if (variant.isLoading) return null;\n        return variant.onPressed;\n    }\n  }\n\n  Color? _getBackgroundColor(ThemeData theme) {\n    if (variant.backgroundColor != null) return variant.backgroundColor;\n    switch (variant.runtimeType) {\n      case const (PrimaryButtonVariant):\n        return theme.colorScheme.primary;\n      case const (SecondaryButtonVariant):\n        return theme.colorScheme.secondary;\n      case const (TertiaryButtonVariant):\n        return theme.colorScheme.tertiary;\n      case const (ErrorButtonVariant):\n        return theme.colorScheme.error;\n      default:\n        return null;\n    }\n  }\n\n  Color? _getForegroundColor(ThemeData theme) {\n    if (variant.foregroundColor != null) return variant.foregroundColor;\n    switch (variant.runtimeType) {\n      case const (PrimaryButtonVariant):\n      case const (ErrorButtonVariant):\n        return theme.colorScheme.onPrimary;\n      case const (SecondaryButtonVariant):\n        return theme.colorScheme.onSecondary;\n      case const (TertiaryButtonVariant):\n        return theme.colorScheme.onTertiary;\n      case const (OutlineButtonVariant):\n      case const (GhostButtonVariant):\n        return theme.colorScheme.onSurface;\n      default:\n        return null;\n    }\n  }\n\n  Widget _getButtonChild(ThemeData theme) {\n    final ch = variant.child ?? Text(_getText());\n    if (variant.icon == null) {\n      if (variant.isLoading) {\n        return Row(\n          mainAxisSize: MainAxisSize.min,\n          children: [\n            const _LoadingIndicator(),\n            ch,\n          ],\n        ).spaced(8);\n      }\n    }\n    return ch;\n  }\n\n  String _getText() {\n    return variant.text ?? 'Button';\n  }\n\n  BorderSide? _getBorder(ThemeData theme) {\n    switch (variant.runtimeType) {\n      case const (OutlineButtonVariant):\n        return BorderSide(color: theme.colorScheme.outline).w;\n      default:\n        return null;\n    }\n  }\n\n  OutlinedBorder? _getShape(ThemeData theme) {\n    switch (variant.runtimeType) {\n      default:\n        return RoundedRectangleBorder(\n          borderRadius: BorderRadius.circular(6).r,\n        );\n    }\n  }\n}\n\nclass _LoadingIndicator extends StatelessWidget {\n  const _LoadingIndicator();\n\n  @override\n  Widget build(BuildContext context) {\n    return SizedBox(\n      width: 20.w,\n      height: 20.h,\n      child: CircularProgressIndicator(strokeWidth: 2.w),\n    );\n  }\n}\n"
  },
  {
    "name": "card",
    "version": "0.0.1",
    "content": "//v0.0.1\n\nimport 'package:fcnui_base/fcnui_base.dart';\nimport 'package:flutter/material.dart';\n\nclass CardVariant extends Equatable {\n  final CardTitle title;\n\n  final CardSubtitle? subtitle;\n\n  final CardContent content;\n\n  final CardFooter footer;\n\n  const CardVariant({\n    required this.title,\n    this.subtitle,\n    required this.content,\n    required this.footer,\n  });\n\n  @override\n  List<Object?> get props => [title, content, footer, subtitle];\n}\n\nclass CardDecoration extends Equatable {\n  final EdgeInsetsGeometry? padding;\n  final Border? border;\n  final BorderRadiusGeometry borderRadius;\n  final Color? color;\n  final List<BoxShadow>? boxShadow;\n  final CrossAxisAlignment childrenCrossAxisAlignment;\n\n  const CardDecoration({\n    this.padding,\n    this.border,\n    this.boxShadow,\n    this.borderRadius = const BorderRadius.all(Radius.circular(8)),\n    this.color,\n    this.childrenCrossAxisAlignment = CrossAxisAlignment.start,\n  });\n\n  @override\n  List<Object?> get props => [padding, border, borderRadius, color];\n}\n\nclass CardTitle extends Equatable {\n  final String title;\n\n  /// If [style] is null, it will use the default style\n  final TextStyle? style;\n\n  const CardTitle({\n    required this.title,\n    this.style,\n  });\n\n  @override\n  List<Object?> get props => [title, style];\n}\n\nclass CardSubtitle extends Equatable {\n  final String subtitle;\n\n  /// If [style] is null, it will use the default style\n  final TextStyle? style;\n\n  const CardSubtitle({\n    required this.subtitle,\n    this.style,\n  });\n\n  @override\n  List<Object?> get props => [subtitle, style];\n}\n\nclass CardContent extends Equatable {\n  final Widget content;\n\n  const CardContent({\n    required this.content,\n  });\n\n  @override\n  List<Object?> get props => [content];\n}\n\nclass CardFooter extends Equatable {\n  final List<Widget> footer;\n\n  final MainAxisAlignment mainAxisAlignment;\n\n  final Axis direction;\n\n  const CardFooter({\n    required this.footer,\n    this.mainAxisAlignment = MainAxisAlignment.spaceBetween,\n    this.direction = Axis.horizontal,\n  });\n\n  @override\n  List<Object?> get props => [footer, mainAxisAlignment, direction];\n}\n\nclass CardCustom extends Equatable {\n  final Widget widget;\n\n  const CardCustom({\n    required this.widget,\n  });\n\n  @override\n  List<Object?> get props => [widget];\n}\n\nclass DefaultCard extends StatelessWidget {\n  final CardVariant? variant;\n  final CardCustom? custom;\n  final CardDecoration decoration;\n\n  const DefaultCard({\n    super.key,\n    this.variant,\n    this.custom,\n    this.decoration = const CardDecoration(),\n  })\n  //Assert 1 of them is not null\n  : assert(variant != null || custom != null,\n            'DefaultCard: variant and custom cannot be null at the same time');\n\n  @override\n  Widget build(BuildContext context) {\n    return ThemeProvider(\n      builder: (context, vm) {\n        return getChild(vm);\n      },\n    );\n  }\n\n  Widget getChild(ThemeVm vm) {\n    return _getCard(vm.theme);\n  }\n\n  Widget _getCard(ThemeData theme) {\n    final EdgeInsets defaultPadding = const EdgeInsets.all(24).w;\n    final List<BoxShadow> cardShadow = [\n      BoxShadow(\n        offset: const Offset(0, 2).w,\n        blurRadius: 4.r,\n        spreadRadius: 0,\n        color: Colors.black.withOpacity(0.08),\n      ),\n      BoxShadow(\n        offset: const Offset(0, 3).w,\n        blurRadius: 10.r,\n        spreadRadius: 0,\n        color: Colors.black.withOpacity(0.1),\n      )\n    ];\n\n    final border = Border.all(\n            color: theme.colorScheme.onSurface.withOpacity(0.1),\n            width: 1,\n            strokeAlign: BorderSide.strokeAlignInside)\n        .w;\n\n    final color = decoration.color ?? theme.colorScheme.surface;\n\n    return DecoratedBox(\n        decoration: BoxDecoration(\n          color: color,\n          borderRadius: decoration.borderRadius,\n          boxShadow: decoration.boxShadow ?? cardShadow,\n          border: decoration.border ?? border,\n        ),\n        child: custom == null\n            ? Padding(\n                padding: decoration.padding ?? defaultPadding,\n                child: Column(\n                  mainAxisSize: MainAxisSize.min,\n                  crossAxisAlignment: decoration.childrenCrossAxisAlignment,\n                  children: [\n                    _getTitle(theme),\n                    if (variant!.subtitle != null) _getSubtitle(theme),\n                    _getContent(theme),\n                    _getFooter(theme),\n                  ],\n                ),\n              )\n            : Padding(\n                padding: decoration.padding ?? defaultPadding,\n                child: custom!.widget,\n              ));\n  }\n\n  Widget _getTitle(ThemeData theme) {\n    final title = variant!.title;\n    return Text(\n      title.title,\n      style: (title.style ??\n              theme.textTheme.headlineSmall!\n                  .copyWith(fontWeight: FontWeight.bold))\n          .sp,\n    );\n  }\n\n  Widget _getSubtitle(ThemeData theme) {\n    final subtitle = variant!.subtitle!;\n\n    Widget widget = Text(\n      subtitle.subtitle,\n      style: (subtitle.style ??\n              theme.textTheme.labelLarge!.copyWith(\n                  fontWeight: FontWeight.normal,\n                  color: theme.colorScheme.onSurface.withOpacity(0.6)))\n          .sp,\n    );\n\n    return Padding(\n      padding: EdgeInsets.only(top: 12.h),\n      child: widget,\n    );\n  }\n\n  Widget _getContent(ThemeData theme) {\n    final content = variant!.content;\n\n    Widget widget = content.content;\n\n    return Padding(\n      padding: EdgeInsets.only(top: 22.h),\n      child: widget,\n    );\n  }\n\n  Widget _getFooter(ThemeData theme) {\n    final footer = variant!.footer;\n\n    Widget widget = Row(\n      mainAxisAlignment: footer.mainAxisAlignment,\n      children: footer.footer.length == 1\n          ? [Expanded(child: footer.footer.first)]\n          : footer.footer,\n    );\n\n    return Padding(\n      padding: EdgeInsets.only(top: 22.h),\n      child: widget,\n    );\n  }\n}\n"
  },
  {
    "name": "disabled",
    "version": "0.0.1",
    "content": "//v0.0.1\n\nimport 'package:flutter/material.dart';\n\nclass DisabledVm {\n  final bool disabled;\n  final double opacity;\n  final Widget child;\n  final bool showForbiddenCursor;\n\n  const DisabledVm({\n    required this.disabled,\n    this.opacity = .5,\n    required this.child,\n    this.showForbiddenCursor = true,\n  });\n}\n\nclass DefaultDisabled extends StatelessWidget {\n  final DisabledVm vm;\n  const DefaultDisabled({super.key, required this.vm});\n\n  @override\n  Widget build(BuildContext context) {\n    Widget view = AbsorbPointer(\n      absorbing: vm.disabled,\n      child: vm.child,\n    );\n\n    if (vm.showForbiddenCursor && vm.disabled) {\n      view = MouseRegion(cursor: SystemMouseCursors.forbidden, child: view);\n    }\n\n    return Opacity(opacity: vm.disabled ? vm.opacity : 1, child: view);\n  }\n}\n"
  },
  {
    "name": "input",
    "version": "0.0.1",
    "dependencies": [
      "form",
      "with_label",
      "save_button"
    ],
    "content": "//v0.0.1\n\nimport 'package:flutter/material.dart';\nimport 'package:flutter/services.dart';\nimport 'package:fcnui_base/fcnui_base.dart';\nimport 'form.dart';\nimport 'disabled.dart';\n\nclass InputModel extends IFormModel {\n  final String? initialValue;\n  final ValueChanged<String?>? onChanged;\n  final int? maxLines;\n  final List<FormFieldValidator<String>> validators;\n  final List<TextInputFormatter> inputFormatters;\n  final bool enabled;\n  final bool readOnly;\n  final String? hintText;\n  final String? helperText;\n  final ValueTransformer<String?>? valueTransformer;\n  final TextEditingController? controller;\n\n  const InputModel({\n    required super.name,\n    this.initialValue,\n    this.controller,\n    this.onChanged,\n    this.valueTransformer,\n    this.helperText,\n    this.enabled = true,\n    this.readOnly = false,\n    this.maxLines,\n    this.hintText,\n    this.validators = const [],\n    this.inputFormatters = const [],\n  });\n\n  @override\n  List<Object?> get props => [\n        name,\n        initialValue,\n        onChanged,\n        valueTransformer,\n        helperText,\n        enabled,\n        readOnly,\n        maxLines,\n        hintText,\n        validators,\n        inputFormatters,\n        controller,\n      ];\n}\n\nclass DefaultInput extends StatelessWidget {\n  final InputModel vm;\n\n  const DefaultInput({super.key, required this.vm});\n\n  @override\n  Widget build(BuildContext context) {\n    return ThemeProvider(builder: (context, vm) {\n      return _getChild(vm);\n    });\n  }\n\n  Widget _getChild(ThemeVm themeVm) {\n    final theme = themeVm.theme;\n    return DefaultDisabled(\n        vm: DisabledVm(\n      disabled: !vm.enabled,\n      child: Theme(\n        data: theme.copyWith(\n          inputDecorationTheme: InputDecorationTheme(\n            hoverColor: Colors.transparent,\n            //Border when tapped and focused\n            focusedBorder: OutlineInputBorder(\n                borderRadius: BorderRadius.circular(8).r,\n                borderSide: BorderSide(\n                        color: theme.colorScheme.primary,\n                        width: 2,\n                        strokeAlign: BorderSide.strokeAlignOutside)\n                    .w),\n            //Idle state border\n            enabledBorder: OutlineInputBorder(\n              borderRadius: BorderRadius.circular(8).r,\n              borderSide: BorderSide(\n                      color: theme.dividerColor,\n                      strokeAlign: BorderSide.strokeAlignInside)\n                  .w,\n            ),\n            errorBorder: OutlineInputBorder(\n              borderRadius: BorderRadius.circular(8).r,\n              borderSide: const BorderSide(\n                      color: Colors.red,\n                      strokeAlign: BorderSide.strokeAlignInside)\n                  .w,\n            ),\n            disabledBorder: OutlineInputBorder(\n              borderRadius: BorderRadius.circular(8).r,\n              borderSide: BorderSide(\n                      color: theme.dividerColor.withOpacity(0.6),\n                      strokeAlign: BorderSide.strokeAlignInside)\n                  .w,\n            ),\n            focusedErrorBorder: OutlineInputBorder(\n              borderRadius: BorderRadius.circular(8).r,\n              borderSide: const BorderSide(\n                      color: Colors.red,\n                      width: 2,\n                      strokeAlign: BorderSide.strokeAlignOutside)\n                  .w,\n            ),\n            errorStyle:\n                theme.textTheme.bodyMedium!.copyWith(color: Colors.red).sp,\n            helperStyle: theme.textTheme.bodyMedium!\n                .copyWith(color: theme.colorScheme.onSurface.withOpacity(0.6))\n                .sp,\n            contentPadding:\n                const EdgeInsets.symmetric(horizontal: 12, vertical: 8).w,\n            floatingLabelBehavior: FloatingLabelBehavior.never,\n            filled: true,\n            fillColor: theme.colorScheme.surface,\n            hintStyle: theme.textTheme.bodyMedium!\n                .copyWith(color: theme.colorScheme.onSurface.withOpacity(0.4))\n                .sp,\n          ),\n        ),\n        child: FormBuilderTextField(\n          controller: vm.controller,\n          style: theme.textTheme.bodyLarge!\n              .copyWith(\n                  color: theme.colorScheme.onSurface,\n                  fontWeight: FontWeight.normal)\n              .sp,\n          name: vm.name,\n          initialValue: vm.initialValue,\n          onChanged: vm.onChanged,\n          maxLines: vm.maxLines,\n          validator: FormBuilderValidators.compose(vm.validators),\n          inputFormatters: vm.inputFormatters,\n          enabled: vm.enabled,\n          valueTransformer: vm.valueTransformer,\n          readOnly: vm.readOnly,\n          decoration: InputDecoration(\n            helperText: vm.helperText,\n            hintText: vm.hintText,\n          ),\n        ),\n      ),\n    ));\n  }\n}\n"
  },
  {
    "name": "form",
    "version": "0.0.1",
    "content": "//v0.0.1\n\nimport 'package:fcnui_base/fcnui_base.dart';\nimport 'package:flutter/material.dart';\n\nabstract class IFormModel extends Equatable {\n  ///This will form the key in the form value Map\n  final String name;\n\n  const IFormModel({\n    required this.name,\n  });\n}\n\nclass FormModel {\n  /// Used for [FormBuilder] to control form\n  final GlobalKey<FormBuilderState> formKey = GlobalKey<FormBuilderState>();\n\n  /// Used for [SaveButton] to enable/disable button\n  final ValueNotifier<bool> isValidFormNotifier = ValueNotifier(false);\n\n  /// Returns true if form is valid\n  bool get isValid => formKey.currentState?.isValid ?? false;\n\n  /// Callback for onChanged event\n  ///\n  /// Triggered when any field in form is changed\n  void Function()? onChanged;\n\n  /// Returns single value from form\n  dynamic getValue(String name) => formKey.currentState?.fields[name]?.value;\n\n  /// Returns all values from form\n  Map<String, dynamic> getValues() => formKey.currentState?.value ?? {};\n\n  /// Set single value to form\n  void patchValue(Map<String, dynamic> value, {bool isSave = true}) {\n    formKey.currentState?.patchValue(value);\n    if (isSave) save();\n  }\n\n  /// Set all values to form\n  void save() => formKey.currentState?.save();\n\n  /// Reset form to initial state\n  void reset() => formKey.currentState?.reset();\n\n  /// Validate form\n  void validate(\n          {bool focusOnInvalid = true,\n          bool autoScrollWhenFocusOnInvalid = false}) =>\n      formKey.currentState?.validate(\n          autoScrollWhenFocusOnInvalid: autoScrollWhenFocusOnInvalid,\n          focusOnInvalid: focusOnInvalid);\n\n  /// Save and validate form\n  void saveAndValidate(\n          {bool focusOnInvalid = true,\n          bool autoScrollWhenFocusOnInvalid = false}) =>\n      formKey.currentState?.saveAndValidate(\n          autoScrollWhenFocusOnInvalid: autoScrollWhenFocusOnInvalid,\n          focusOnInvalid: focusOnInvalid);\n\n  /// Invalidate field\n  ///\n  /// Show error message on field if it's invalid\n  void invalidateField(String name, String message) =>\n      formKey.currentState?.fields[name]\n          ?.invalidate(message, shouldFocus: false);\n}\n\nclass DefaultForm extends StatelessWidget {\n  final FormModel vm;\n  final Widget child;\n  final bool clearValueOnUnregister;\n\n  /// If true, the form will save and validate on every change\n  ///\n  /// Used to auto validate on form change\n  ///\n  /// If using [SaveButton] trigger [autoValidate] field true.\n  final bool saveAndValidateOnChange;\n  const DefaultForm(\n      {super.key,\n      required this.vm,\n      required this.child,\n      this.saveAndValidateOnChange = false,\n      this.clearValueOnUnregister = false});\n\n  @override\n  Widget build(BuildContext context) {\n    return FormBuilder(\n      clearValueOnUnregister: clearValueOnUnregister,\n      key: vm.formKey,\n      onChanged: () {\n        if (saveAndValidateOnChange) {\n          vm.formKey.currentState?.save();\n        }\n        vm.isValidFormNotifier.value = vm.isValid;\n        vm.onChanged?.call();\n      },\n      child: child,\n    );\n  }\n}\n"
  },
  {
    "name": "label",
    "version": "0.0.1",
    "dependencies": [
      "disabled"
    ],
    "content": "//v0.0.1\n\nimport 'package:fcnui_base/fcnui_base.dart';\nimport 'package:flutter/material.dart';\nimport 'disabled.dart';\n\nclass LabelModel extends Equatable {\n  final String text;\n  final bool isRequired;\n  final bool enabled;\n  const LabelModel({\n    required this.text,\n    this.enabled = true,\n    this.isRequired = false,\n  });\n\n  @override\n  List<Object?> get props => [\n        text,\n        isRequired,\n        enabled,\n      ];\n}\n\nclass Label extends StatelessWidget {\n  final LabelModel vm;\n  const Label({super.key, required this.vm});\n\n  @override\n  Widget build(BuildContext context) {\n    return DefaultDisabled(\n        vm: DisabledVm(\n      disabled: !vm.enabled,\n      child: RichText(\n          text: TextSpan(children: [\n        TextSpan(\n            text: vm.text,\n            style: Theme.of(context).textTheme.titleSmall!.copyWith(\n                  fontWeight: FontWeight.normal,\n                  color: vm.enabled\n                      ? null\n                      : Theme.of(context)\n                          .colorScheme\n                          .onSurface\n                          .withOpacity(0.4),\n                )),\n        if (vm.isRequired)\n          TextSpan(\n              text: \"\\t*\",\n              style: Theme.of(context)\n                  .textTheme\n                  .titleMedium!\n                  .copyWith(color: Colors.red))\n      ])),\n    ));\n  }\n}\n"
  },
  {
    "name": "with_label",
    "version": "0.0.1",
    "dependencies": [
      "label"
    ],
    "content": "//v0.0.1\n\nimport 'package:fcnui_base/fcnui_base.dart';\nimport 'package:flutter/material.dart';\nimport 'label.dart';\n\nexport 'label.dart';\n\nclass WithLabel extends StatelessWidget {\n  final LabelModel labelVm;\n  final Widget child;\n  const WithLabel({super.key, required this.labelVm, required this.child});\n\n  @override\n  Widget build(BuildContext context) {\n    return Column(\n      crossAxisAlignment: CrossAxisAlignment.start,\n      mainAxisSize: MainAxisSize.min,\n      children: [\n        Label(vm: labelVm),\n        child,\n      ],\n    ).spaced(4);\n  }\n}\n"
  },
  {
    "name": "save_button",
    "version": "0.0.1",
    "dependencies": [
      "button",
      "form"
    ],
    "content": "//v0.0.1\n\nimport 'package:flutter/material.dart';\nimport 'form.dart';\nimport 'button.dart';\n\nclass SaveButton extends StatelessWidget {\n  final FormModel vm;\n  final ValueChanged<Map<String, dynamic>>? onSave;\n  final String text;\n  final bool autoValidate;\n  const SaveButton(\n      {super.key,\n      required this.vm,\n      required this.onSave,\n      this.text = \"Save\",\n      this.autoValidate = false});\n\n  @override\n  Widget build(BuildContext context) {\n    if (autoValidate) {\n      return ValueListenableBuilder<bool>(\n          valueListenable: vm.isValidFormNotifier,\n          builder: (context, value, child) {\n            return DefaultButton(\n              variant: PrimaryButtonVariant(\n                text: text,\n                minimumSize: const Size(0, 54),\n                onPressed: value\n                    ? () {\n                        vm.formKey.currentState?.saveAndValidate();\n                        onSave?.call(vm.formKey.currentState?.value\n                            as Map<String, dynamic>);\n                      }\n                    : null,\n              ),\n            );\n          });\n    } else {\n      return DefaultButton(\n        variant: PrimaryButtonVariant(\n            text: text,\n            minimumSize: const Size(0, 54),\n            onPressed: onSave == null\n                ? null\n                : () {\n                    vm.formKey.currentState?.saveAndValidate();\n                    onSave!(\n                        vm.formKey.currentState?.value as Map<String, dynamic>);\n                  }),\n      );\n    }\n  }\n}\n"
  },
  {
    "name": "dp_item",
    "version": "0.0.1",
    "content": "//v0.0.1\n\nimport 'package:fcnui_base/fcnui_base.dart';\nimport 'package:flutter/material.dart';\n\nclass DpItem extends Equatable {\n  final String id;\n  final String title;\n  final String? subtitle;\n  final IconData? icon;\n\n  const DpItem(\n      {required this.id, required this.title, this.subtitle, this.icon});\n\n  @override\n  List<Object?> get props => [id, title, subtitle, icon];\n\n  //copyWith\n  DpItem copyWith({\n    String? id,\n    String? title,\n    String? subtitle,\n    IconData? icon,\n  }) {\n    return DpItem(\n      id: id ?? this.id,\n      title: title ?? this.title,\n      subtitle: subtitle ?? this.subtitle,\n      icon: icon ?? this.icon,\n    );\n  }\n}\n"
  },
  {
    "name": "checkbox",
    "version": "0.0.1",
    "dependencies": [
      "disabled",
      "form",
      "dp_item"
    ],
    "content": "//v0.0.1\n\nimport 'package:fcnui_base/fcnui_base.dart';\nimport 'package:flutter/material.dart';\nimport 'disabled.dart';\nimport 'dp_item.dart';\nimport 'form.dart';\n\nclass CheckboxModel extends IFormModel {\n  final List<DpItem> items;\n  final ValueChanged<List<String>?>? onChanged;\n  final List<String>? initialValues;\n  final List<String> disabled;\n  final bool enabled;\n  final String? Function(List<String>?)? validator;\n  final OptionsOrientation? orientation;\n  final AutovalidateMode autovalidateMode;\n  final Axis? wrapDirection;\n  final String? helperText;\n  final String? title;\n  final String? subtitle;\n\n  const CheckboxModel({\n    required super.name,\n    required this.items,\n    this.onChanged,\n    this.wrapDirection,\n    this.orientation,\n    this.autovalidateMode = AutovalidateMode.disabled,\n    this.initialValues,\n    this.helperText,\n    this.disabled = const [],\n    this.enabled = true,\n    this.validator,\n    this.subtitle,\n    this.title,\n  });\n\n  @override\n  List<Object?> get props => [\n        name,\n        items,\n        onChanged,\n        orientation,\n        initialValues,\n        disabled,\n        enabled,\n        validator,\n        autovalidateMode,\n        wrapDirection,\n        helperText,\n        title,\n        subtitle,\n      ];\n}\n\nclass FormCheckbox extends StatelessWidget {\n  final CheckboxModel vm;\n  const FormCheckbox({super.key, required this.vm});\n\n  @override\n  Widget build(BuildContext context) {\n    return ThemeProvider(builder: (context, themeVm) {\n      final theme = themeVm.theme;\n      return _getChild(theme);\n    });\n  }\n\n  Widget _getChild(ThemeData theme) {\n    return DefaultDisabled(\n        vm: DisabledVm(\n      disabled: !vm.enabled,\n      child: Theme(\n        data: theme.copyWith(checkboxTheme: _getCheckboxTheme(theme)),\n        child: FormBuilderField<List<String>>(\n          name: vm.name,\n          enabled: vm.enabled,\n          validator: vm.validator,\n          onChanged: vm.onChanged,\n          initialValue: vm.initialValues,\n          autovalidateMode: vm.autovalidateMode,\n          builder: (field) {\n            return Column(\n              mainAxisSize: MainAxisSize.min,\n              crossAxisAlignment: CrossAxisAlignment.start,\n              children: [\n                if (vm.title != null)\n                  Text(vm.title!,\n                      style: theme.textTheme.titleMedium!.copyWith(\n                        color: field.errorText == null ? null : Colors.red,\n                      )),\n                if (vm.subtitle != null)\n                  Text(vm.subtitle!,\n                      style: theme.textTheme.bodySmall!.copyWith(\n                          color: theme.colorScheme.onSurface.withOpacity(0.6))),\n                if (vm.title != null || vm.subtitle != null)\n                  const SizedBox(height: 4),\n                GroupCheckbox(field: field, vm: vm),\n                if (vm.helperText != null)\n                  Text(vm.helperText!, style: theme.textTheme.bodyMedium),\n                if (field.errorText != null)\n                  Text(\n                    field.errorText!,\n                    style:\n                        theme.textTheme.bodySmall?.copyWith(color: Colors.red),\n                  ),\n              ],\n            ).spaced(4);\n          },\n        ),\n      ),\n    ));\n  }\n\n  CheckboxThemeData _getCheckboxTheme(ThemeData theme) {\n    return theme.checkboxTheme.copyWith(\n        side: BorderSide(color: theme.colorScheme.onSurface, width: 1).w,\n        shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(4).r),\n        overlayColor: const MaterialStatePropertyAll(Colors.transparent),\n        splashRadius: 0);\n  }\n}\n\nclass GroupCheckbox extends StatelessWidget {\n  final FormFieldState<List<String>> field;\n  final CheckboxModel vm;\n  const GroupCheckbox({super.key, required this.field, required this.vm});\n\n  @override\n  Widget build(BuildContext context) {\n    if (vm.orientation == OptionsOrientation.horizontal) {\n      return Row(\n        mainAxisSize: MainAxisSize.min,\n        crossAxisAlignment: CrossAxisAlignment.start,\n        children: [\n          for (final item in vm.items)\n            CustomCheckbox(\n              field: field,\n              item: item,\n              vm: vm,\n            ),\n        ],\n      );\n    } else if (vm.orientation == OptionsOrientation.vertical) {\n      return Column(\n        mainAxisSize: MainAxisSize.min,\n        crossAxisAlignment: CrossAxisAlignment.start,\n        children: [\n          for (final item in vm.items)\n            CustomCheckbox(\n              field: field,\n              item: item,\n              vm: vm,\n            ),\n        ],\n      );\n    }\n    return Wrap(\n      spacing: 10.0,\n      runSpacing: 10.0,\n      direction: vm.wrapDirection ?? Axis.horizontal,\n      children: [\n        for (final item in vm.items)\n          CustomCheckbox(\n            field: field,\n            item: item,\n            vm: vm,\n          ),\n      ],\n    );\n  }\n}\n\nclass CustomCheckbox extends StatelessWidget {\n  final FormFieldState<List<String>> field;\n  final DpItem item;\n  final CheckboxModel vm;\n\n  const CustomCheckbox(\n      {super.key, required this.field, required this.vm, required this.item});\n\n  @override\n  Widget build(BuildContext context) {\n    final bool isDisabled = vm.disabled.contains(item.id);\n    final textTheme = Theme.of(context).textTheme;\n    final colorScheme = Theme.of(context).colorScheme;\n    final bool isValid = field.errorText == null;\n    return DefaultDisabled(\n      vm: DisabledVm(\n          disabled: isDisabled,\n          child: GestureDetector(\n            onTap: () {\n              onCheckboxChanged(!(field.value?.contains(item.id) ?? false));\n            },\n            child: Row(\n              mainAxisSize: MainAxisSize.min,\n              crossAxisAlignment: item.subtitle != null\n                  ? CrossAxisAlignment.start\n                  : CrossAxisAlignment.center,\n              children: [\n                //Checkbox\n                Checkbox(\n                    value: field.value?.contains(item.id) ??\n                        vm.initialValues?.contains(item.id) ??\n                        false,\n                    onChanged: onCheckboxChanged),\n\n                Column(\n                  mainAxisSize: MainAxisSize.min,\n                  crossAxisAlignment: CrossAxisAlignment.start,\n                  children: [\n                    //Title\n                    Text(\n                      item.title,\n                      style: TextStyle(\n                        color:\n                            isValid ? null : (isDisabled ? null : Colors.red),\n                      ),\n                    ),\n\n                    //Subtitle, if any\n                    if (item.subtitle != null)\n                      Text(item.subtitle!,\n                          style: textTheme.bodySmall?.copyWith(\n                              color: colorScheme.onSurface.withOpacity(0.6))),\n                  ],\n                ).spaced(2),\n              ],\n            ).spaced(4),\n          )),\n    );\n  }\n\n  void onCheckboxChanged(bool? value) {\n    if (value == true) {\n      field.didChange([...(field.value ?? []), item.id]);\n    } else {\n      field.didChange(field.value?.where((e) => e != item.id).toList());\n    }\n    vm.onChanged?.call(field.value);\n  }\n}\n"
  },
  {
    "name":"dropdown",
    "version": "0.0.1",
    "dependencies": [
      "input",
      "dp_item"
    ],
    "content": "import 'package:fcnui_base/fcnui_base.dart';\nimport 'package:flutter/material.dart';\nimport 'form.dart';\nimport 'input.dart';\nimport 'disabled.dart';\nimport 'dp_item.dart';\n\nclass DropdownItem extends Equatable {\n  final String? groupTitle;\n  final IconData? groupIcon;\n  final List<DpItem> items;\n\n  const DropdownItem({\n    this.groupTitle,\n    required this.items,\n    this.groupIcon,\n  });\n\n  @override\n  List<Object?> get props => [groupTitle, items, groupIcon];\n\n  //copyWith\n  DropdownItem copyWith({\n    String? groupTitle,\n    IconData? groupIcon,\n    List<DpItem>? items,\n  }) {\n    return DropdownItem(\n      groupTitle: groupTitle ?? this.groupTitle,\n      groupIcon: groupIcon ?? this.groupIcon,\n      items: items ?? this.items,\n    );\n  }\n}\n\nclass DropdownVariant extends IFormModel {\n  final DpForm form;\n  final DpDecoration decoration;\n  final List<String> disabledItems;\n\n  const DropdownVariant({\n    required super.name,\n    this.disabledItems = const [],\n    required this.form,\n    this.decoration = const DpDecoration(),\n  });\n\n  @override\n  List<Object?> get props => [name, form, decoration, disabledItems];\n}\n\nclass DpForm extends Equatable {\n  final List<DropdownItem> items;\n\n  ///If null, then disabled\n  final void Function(String?)? onChanged;\n\n  final String? initialValue;\n  final String? Function(String?)? validator;\n  final AutovalidateMode? autovalidateMode;\n\n  DpForm({\n    required this.items,\n    this.onChanged,\n    this.initialValue,\n    this.validator,\n    this.autovalidateMode,\n  })  :\n        //assert if items has same id\n        assert(\n            items\n                    .expand((element) => element.items)\n                    .map((e) => e.id)\n                    .toSet()\n                    .length ==\n                items\n                    .expand((element) => element.items)\n                    .map((e) => e.id)\n                    .length,\n            \"Items id must be unique\"),\n        //assert if items has at least one item\n        assert(items.isNotEmpty, \"Items cannot be empty\");\n\n  @override\n  List<Object?> get props =>\n      [items, onChanged, initialValue, validator, autovalidateMode];\n}\n\nclass DpDecoration extends Equatable {\n  final String? hintText;\n  final IconData? icon;\n  final Color? selectedColor;\n  final Color? hoverColor;\n  final String? searchHintText;\n  final Color? backgroundColor;\n  final Color? foregroundColor;\n  final String? helperText;\n  final bool hasSearchBox;\n\n  const DpDecoration({\n    this.hintText,\n    this.icon,\n    this.backgroundColor,\n    this.selectedColor,\n    this.hoverColor,\n    this.searchHintText,\n    this.foregroundColor,\n    this.helperText,\n    this.hasSearchBox = false,\n  });\n\n  @override\n  List<Object?> get props => [\n        hintText,\n        icon,\n        selectedColor,\n        hoverColor,\n        searchHintText,\n        backgroundColor,\n        foregroundColor,\n        helperText,\n        hasSearchBox\n      ];\n}\n\nclass DefaultDropdown extends StatelessWidget {\n  final DropdownVariant variant;\n\n  const DefaultDropdown({super.key, required this.variant});\n\n  @override\n  Widget build(BuildContext context) {\n    return DefaultDisabled(\n      vm: DisabledVm(\n          disabled: variant.form.onChanged == null,\n          child: FormBuilderField<String>(\n            name: variant.name,\n            validator: variant.form.validator,\n            initialValue: variant.form.initialValue,\n            onChanged: variant.form.onChanged,\n            autovalidateMode: variant.form.autovalidateMode,\n            enabled: variant.form.onChanged != null,\n            builder: (FormFieldState<String> state) {\n              return _DropdownSelect(state: state, variant: variant);\n            },\n          )),\n    );\n  }\n}\n\nclass _DropdownSelect extends StatefulWidget {\n  final FormFieldState<String> state;\n  final DropdownVariant variant;\n\n  const _DropdownSelect({required this.state, required this.variant});\n\n  @override\n  State<_DropdownSelect> createState() => __DropdownSelectState();\n}\n\nclass __DropdownSelectState extends State<_DropdownSelect> {\n  final TextEditingController searchController = TextEditingController();\n\n  DropdownVariant get variant => widget.variant;\n\n  FormFieldState<String> get state => widget.state;\n\n  String? get errorText => state.errorText;\n\n  DpItem? get selectedItem => variant.form.items\n      .expand((element) => element.items)\n      .firstWhereOrNull((element) => element.id == state.value);\n\n  @override\n  void initState() {\n    super.initState();\n    WidgetsBinding.instance.addPostFrameCallback((timeStamp) {\n      if (variant.form.initialValue != null) {\n        state.didChange(variant.form.initialValue);\n      }\n    });\n  }\n\n  @override\n  void dispose() {\n    searchController.dispose();\n    super.dispose();\n  }\n\n  InputDecorationTheme _getInputDecoration(ThemeData theme) {\n    return theme.inputDecorationTheme.copyWith(\n      contentPadding: const EdgeInsets.all(0),\n      //Border when tapped and focused\n      focusedBorder: OutlineInputBorder(\n          borderRadius: BorderRadius.circular(4).r,\n          borderSide: BorderSide(\n                  color: variant.decoration.foregroundColor ??\n                      theme.dividerColor.withOpacity(0.6),\n                  width: 1,\n                  strokeAlign: BorderSide.strokeAlignOutside)\n              .w),\n      //Idle state border\n      enabledBorder: OutlineInputBorder(\n        borderRadius: BorderRadius.circular(4).r,\n        borderSide: BorderSide(\n                color: variant.decoration.foregroundColor ??\n                    theme.dividerColor.withOpacity(0.6),\n                strokeAlign: BorderSide.strokeAlignInside)\n            .w,\n      ),\n      errorBorder: OutlineInputBorder(\n        borderRadius: BorderRadius.circular(4).r,\n        borderSide: const BorderSide(\n                color: Colors.red, strokeAlign: BorderSide.strokeAlignInside)\n            .w,\n      ),\n      disabledBorder: OutlineInputBorder(\n        borderRadius: BorderRadius.circular(4).r,\n        borderSide: BorderSide(\n                color: theme.dividerColor.withOpacity(0.6),\n                strokeAlign: BorderSide.strokeAlignInside)\n            .w,\n      ),\n      focusedErrorBorder: OutlineInputBorder(\n        borderRadius: BorderRadius.circular(4).r,\n        borderSide: const BorderSide(\n                color: Colors.red,\n                width: 1,\n                strokeAlign: BorderSide.strokeAlignOutside)\n            .w,\n      ),\n      focusColor: Colors.transparent,\n      hoverColor: Colors.transparent,\n      filled: true,\n      fillColor:\n          variant.decoration.backgroundColor ?? theme.colorScheme.surface,\n      errorMaxLines: 2,\n      helperMaxLines: 2,\n    );\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    final bool isError = state.hasError;\n    final String? errorText = state.errorText;\n\n    return ThemeProvider(builder: (context, themeVm) {\n      final ThemeData theme = themeVm.theme;\n      return Theme(\n        data: theme.copyWith(\n          inputDecorationTheme: _getInputDecoration(theme),\n        ),\n        child: DropdownButtonFormField2<DpItem>(\n          items: _getItems(themeVm.theme),\n          isExpanded: true,\n          value: selectedItem,\n          hint: variant.decoration.hintText != null\n              ? Text(\n                  variant.decoration.hintText!,\n                  overflow: TextOverflow.ellipsis,\n                  style: theme.textTheme.bodyMedium!.copyWith(\n                      fontWeight: FontWeight.normal,\n                      color: variant.decoration.foregroundColor),\n                )\n              : null,\n          dropdownSearchData: variant.decoration.hasSearchBox\n              ? DropdownSearchData(\n                  searchController: searchController,\n                  searchInnerWidget: Padding(\n                    padding: const EdgeInsets.only(left: 8, right: 8, top: 8).w,\n                    child: DefaultInput(\n                        vm: InputModel(\n                      controller: searchController,\n                      name: \"${variant.name}Search\",\n                      hintText: variant.decoration.searchHintText ?? \"Search\",\n                    )),\n                  ),\n                  searchMatchFn: (item, searchValue) {\n                    bool found = false;\n                    if (item.value?.title\n                            .toLowerCase()\n                            .contains(searchValue.toLowerCase()) ??\n                        false) {\n                      found = true;\n                    } else {\n                      if (item.value?.subtitle\n                              ?.toLowerCase()\n                              .contains(searchValue.toLowerCase()) ??\n                          false) {\n                        found = true;\n                      }\n                    }\n                    return found;\n                  },\n                  searchInnerWidgetHeight: 36.h,\n                )\n              : null,\n          decoration: InputDecoration(\n              errorText: isError ? errorText : null,\n              errorStyle:\n                  theme.textTheme.bodyMedium!.copyWith(color: Colors.red),\n              hoverColor: Colors.transparent,\n              helperText: variant.decoration.helperText,\n              helperStyle: theme.textTheme.bodySmall!.copyWith(\n                  color: theme.colorScheme.onSurface.withOpacity(0.4))),\n          onChanged: variant.form.onChanged == null\n              ? null\n              : (value) {\n                  state.didChange(value?.id);\n                },\n          dropdownStyleData: _getDropdownStyle(theme),\n          iconStyleData: _getIconStyle(theme),\n          menuItemStyleData: _getMenuItemStyle(theme),\n          selectedItemBuilder: (context) {\n            return _getItems(theme).map((e) {\n              return RichText(\n                overflow: TextOverflow.ellipsis,\n                text: TextSpan(children: [\n                  TextSpan(\n                      text: selectedItem?.title,\n                      style: theme.textTheme.bodyLarge!\n                          .copyWith(color: variant.decoration.foregroundColor)),\n                ]),\n              );\n            }).toList();\n          },\n          buttonStyleData: ButtonStyleData(\n            elevation: 0,\n            overlayColor: MaterialStateProperty.resolveWith((states) {\n              return Colors.transparent;\n            }),\n          ),\n        ),\n      );\n    });\n  }\n\n  IconStyleData _getIconStyle(ThemeData theme) {\n    return IconStyleData(\n      icon: Padding(\n        padding: const EdgeInsets.only(right: 16.0).w,\n        child: Icon(\n          variant.decoration.icon ?? Icons.unfold_more,\n          color: variant.decoration.foregroundColor ??\n              theme.colorScheme.onSurface.withOpacity(0.6),\n          size: 16.w,\n        ),\n      ),\n    );\n  }\n\n  DropdownStyleData _getDropdownStyle(ThemeData theme) {\n    final shadows = [\n      BoxShadow(\n        offset: const Offset(0, 2).w,\n        color: Colors.black.withOpacity(0.08),\n        blurRadius: 4.w,\n        spreadRadius: 0,\n      ),\n      BoxShadow(\n        offset: const Offset(0, 4).w,\n        color: Colors.black.withOpacity(0.1),\n        blurRadius: 10.w,\n        spreadRadius: 0,\n      ),\n    ];\n    return DropdownStyleData(\n      maxHeight: 300.h,\n      padding: const EdgeInsets.all(8).w,\n      elevation: 0,\n      offset: const Offset(0, -4).w,\n      decoration: BoxDecoration(\n        boxShadow: shadows,\n        border: Border.all(\n          color: theme.dividerColor.withOpacity(0.6),\n          width: 1.w,\n        ),\n        borderRadius: BorderRadius.circular(4).r,\n      ),\n    );\n  }\n\n  MenuItemStyleData _getMenuItemStyle(ThemeData theme) {\n    return MenuItemStyleData(\n        overlayColor: MaterialStateProperty.resolveWith((states) {\n          if (states.contains(MaterialState.hovered)) {\n            return variant.decoration.hoverColor ??\n                variant.decoration.backgroundColor ??\n                theme.dividerColor.withOpacity(0.4);\n          }\n          return null;\n        }),\n        selectedMenuItemBuilder: (context, child) {\n          return DecoratedBox(\n            decoration: BoxDecoration(\n              color: variant.decoration.selectedColor ??\n                  variant.decoration.backgroundColor ??\n                  theme.dividerColor.withOpacity(0.4),\n              borderRadius: BorderRadius.circular(4).r,\n            ),\n            child: child,\n          );\n        },\n        padding: const EdgeInsets.all(0).w,\n        customHeights: _getCustomHeights());\n  }\n\n  List<double> _getCustomHeights() {\n    final List<double> customHeights = [];\n    //if has group title => 35\n    //if has subtitle => 50\n    //if has only title => 35\n    for (final groupItem in variant.form.items) {\n      if (groupItem.groupTitle != null) {\n        customHeights.add(35.h);\n      }\n      for (final item in groupItem.items) {\n        if (item.subtitle != null) {\n          customHeights.add(50.h);\n        } else {\n          customHeights.add(35.h);\n        }\n      }\n    }\n    return customHeights;\n  }\n\n  String? hoveringId;\n\n  List<DropdownMenuItem<DpItem>> _getItems(ThemeData theme) {\n    final List<DropdownMenuItem<DpItem>> items = [];\n\n    for (final groupItem in variant.form.items) {\n      if (groupItem.groupTitle != null) {\n        items.add(DropdownMenuItem<DpItem>(\n          value: DpItem(\n              id: \"title${groupItem.groupTitle}\", title: groupItem.groupTitle!),\n          enabled: false,\n          child: Container(\n            margin: const EdgeInsets.symmetric(horizontal: 8).w,\n            child: Row(\n              mainAxisSize: MainAxisSize.min,\n              children: [\n                if (groupItem.groupIcon != null)\n                  Icon(groupItem.groupIcon,\n                      color: theme.colorScheme.onSurface.withOpacity(0.6),\n                      size: 16.w),\n                Text(groupItem.groupTitle!, style: theme.textTheme.titleMedium),\n              ],\n            ).spaced(8),\n          ),\n        ));\n      }\n      for (final item in groupItem.items) {\n        items.add(DropdownMenuItem<DpItem>(\n          value: item,\n          enabled: !variant.disabledItems.contains(item.id),\n          child: DefaultDisabled(\n              vm: DisabledVm(\n            disabled: variant.disabledItems.contains(item.id),\n            child: Container(\n              width: double.infinity,\n              height: double.infinity,\n              padding: const EdgeInsets.symmetric(horizontal: 8).w,\n              alignment: Alignment.centerLeft,\n              child: Row(\n                mainAxisSize: MainAxisSize.min,\n                crossAxisAlignment: CrossAxisAlignment.center,\n                children: [\n                  if (item.icon != null)\n                    Row(\n                      mainAxisSize: MainAxisSize.min,\n                      children: [\n                        Icon(item.icon,\n                            color: theme.colorScheme.onSurface.withOpacity(0.6),\n                            size: 16.w),\n                        const SizedBox(width: 8).w,\n                      ],\n                    ),\n                  Expanded(\n                    child: Column(\n                      crossAxisAlignment: CrossAxisAlignment.start,\n                      mainAxisSize: MainAxisSize.min,\n                      children: [\n                        Text(item.title,\n                            maxLines: 1,\n                            overflow: TextOverflow.ellipsis,\n                            style: theme.textTheme.bodyMedium),\n                        if (item.subtitle != null)\n                          Text(item.subtitle!,\n                              maxLines: 1,\n                              overflow: TextOverflow.ellipsis,\n                              style: theme.textTheme.bodySmall!.copyWith(\n                                color: theme.colorScheme.onSurface\n                                    .withOpacity(0.6),\n                              )),\n                      ],\n                    ),\n                  ),\n                ],\n              ),\n            ),\n          )),\n        ));\n      }\n    }\n    return items;\n  }\n}\n"
  },
  {
    "name": "switch",
    "version": "0.0.1",
    "dependencies": [
      "form",
      "disabled"
    ],
    "content": "//v0.0.1\n\nimport 'package:fcnui_base/fcnui_base.dart';\nimport 'package:flutter/material.dart';\n\nimport 'disabled.dart';\nimport 'form.dart';\n\nclass SwitchModel extends IFormModel {\n  final SwitchForm form;\n  final SwitchDecoration decoration;\n\n  const SwitchModel({\n    required super.name,\n    this.form = const SwitchForm(),\n    this.decoration = const SwitchDecoration(),\n  });\n\n  @override\n  List<Object?> get props => [\n        name,\n        form,\n        decoration,\n      ];\n}\n\nclass SwitchForm extends Equatable {\n  final ValueChanged<bool?>? onChanged;\n  final bool? initialValue;\n  final String? Function(bool?)? validator;\n  final AutovalidateMode? autovalidateMode;\n\n  const SwitchForm({\n    this.onChanged,\n    this.initialValue,\n    this.validator,\n    this.autovalidateMode,\n  });\n\n  @override\n  List<Object?> get props =>\n      [onChanged, initialValue, validator, autovalidateMode];\n}\n\nclass SwitchDecoration extends Equatable {\n  final String? title;\n  final String? subtitle;\n  final bool enabled;\n  final IconData? thumbActiveIcon;\n  final IconData? thumbInactiveIcon;\n  final Color thumbActiveColor;\n  final Color thumbInactiveColor;\n  final Color? trackActiveColor;\n  final Color? trackInactiveColor;\n  final double width;\n  final double height;\n\n  const SwitchDecoration({\n    this.title,\n    this.subtitle,\n    this.enabled = true,\n    this.thumbActiveIcon,\n    this.thumbInactiveIcon,\n    this.thumbActiveColor = Colors.white,\n    this.thumbInactiveColor = Colors.white,\n    this.trackActiveColor,\n    this.trackInactiveColor,\n    this.width = 45,\n    this.height = 24,\n  });\n\n  @override\n  List<Object?> get props => [\n        title,\n        subtitle,\n        enabled,\n        width,\n        height,\n        thumbActiveColor,\n        thumbInactiveColor,\n        trackActiveColor,\n        trackInactiveColor,\n        thumbActiveIcon,\n        thumbInactiveIcon,\n      ];\n}\n\nclass DefaultSwitch extends StatelessWidget {\n  final SwitchModel vm;\n\n  const DefaultSwitch({super.key, required this.vm});\n\n  @override\n  Widget build(BuildContext context) {\n    return DefaultDisabled(\n      vm: DisabledVm(\n        disabled: !vm.decoration.enabled,\n        child: FormBuilderField<bool>(\n          name: vm.name,\n          validator: vm.form.validator,\n          enabled: vm.decoration.enabled,\n          initialValue: vm.form.initialValue,\n          onChanged: vm.form.onChanged,\n          autovalidateMode: vm.form.autovalidateMode,\n          builder: (field) {\n            return _Switch(field: field, vm: vm);\n          },\n        ),\n      ),\n    );\n  }\n}\n\nclass _Switch extends StatefulWidget {\n  final FormFieldState<bool> field;\n  final SwitchModel vm;\n\n  const _Switch({required this.field, required this.vm});\n\n  @override\n  State<_Switch> createState() => _SwitchState();\n}\n\nclass _SwitchState extends State<_Switch> {\n  FormFieldState<bool> get field => widget.field;\n\n  SwitchModel get vm => widget.vm;\n\n  @override\n  void initState() {\n    super.initState();\n    WidgetsBinding.instance.addPostFrameCallback((_) {\n      field.didChange(vm.form.initialValue ?? false);\n    });\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    final errorText = field.errorText;\n    final isError = errorText != null;\n    return ThemeProvider(builder: (context, themeVm) {\n      final theme = themeVm.theme;\n      return Theme(\n        data: theme.copyWith(\n          switchTheme: theme.switchTheme.copyWith(\n            trackOutlineWidth: MaterialStateProperty.all(0),\n            splashRadius: 17,\n          ),\n        ),\n        child: Column(\n          mainAxisSize: MainAxisSize.min,\n          crossAxisAlignment: CrossAxisAlignment.start,\n          children: [\n            Row(\n              mainAxisSize: MainAxisSize.min,\n              children: [\n                SizedBox(\n                    width: vm.decoration.width,\n                    height: vm.decoration.height,\n                    child: FittedBox(\n                        fit: BoxFit.cover,\n                        child: Switch(\n                          value: field.value ?? false,\n                          onChanged: field.didChange,\n                          focusColor:\n                              theme.colorScheme.primary.withOpacity(0.12),\n                          thumbIcon:\n                              MaterialStateProperty.resolveWith((states) {\n                            //Handle states here. Ex: disabled, error, etc.\n                            //check if active\n                            if (field.value == true) {\n                              return Icon(vm.decoration.thumbActiveIcon);\n                            }\n                            //check if inactive\n                            return Icon(vm.decoration.thumbInactiveIcon);\n                          }),\n                          thumbColor:\n                              MaterialStateProperty.resolveWith((states) {\n                            //Handle states here. Ex: disabled, error, etc.\n                            //check if active\n                            if (field.value == true) {\n                              return vm.decoration.thumbActiveColor;\n                            }\n                            //check if inactive\n                            return vm.decoration.thumbInactiveColor;\n                          }),\n                          trackColor:\n                              MaterialStateProperty.resolveWith((states) {\n                            //Handle states here. Ex: disabled, error, etc.\n                            // check if active\n                            if (field.value == true) {\n                              return vm.decoration.trackActiveColor;\n                            }\n                            //check if inactive\n                            return vm.decoration.trackInactiveColor;\n                          }),\n                          trackOutlineColor:\n                              MaterialStateProperty.resolveWith((states) {\n                            return theme.colorScheme.onSurface\n                                .withOpacity(0.05);\n                          }),\n                        ))).w,\n                if (vm.decoration.title != null ||\n                    vm.decoration.subtitle != null)\n                  GestureDetector(\n                    onTap: () => field.didChange(field.value == null\n                        ? vm.form.initialValue\n                        : !field.value!),\n                    child: Column(\n                      mainAxisSize: MainAxisSize.min,\n                      crossAxisAlignment: CrossAxisAlignment.start,\n                      children: [\n                        if (vm.decoration.title != null)\n                          Text(vm.decoration.title!,\n                              style: theme.textTheme.titleSmall!.copyWith(\n                                  fontWeight: FontWeight.normal,\n                                  color: isError ? Colors.red : null)),\n                        if (vm.decoration.subtitle != null)\n                          Text(vm.decoration.subtitle!,\n                              style: theme.textTheme.bodySmall!.copyWith(\n                                  color: theme.colorScheme.onSurface\n                                      .withOpacity(0.6))),\n                      ],\n                    ),\n                  ),\n              ],\n            ).spaced(4),\n            if (isError)\n              Text(\n                errorText,\n                style: theme.textTheme.bodySmall!.copyWith(color: Colors.red),\n              ),\n          ],\n        ).spaced(4),\n      );\n    });\n  }\n}\n"
  }
]